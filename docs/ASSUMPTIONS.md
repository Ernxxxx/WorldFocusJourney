# Assumptions

設計書に基づき、以下の仮定を置いて実装を進めます。

## 技術的仮定

### Supabase
- 新規Supabaseプロジェクトを作成する想定
- `supabase/migrations/` にマイグレーションファイルを配置
- ローカル開発用に `supabase init` を使用

### Next.js
- Next.js 14+ (App Router) を使用
- TypeScript strict mode
- Tailwind CSS でスタイリング

### 地図
- 日本地図はSVGで抽象的に描画（正確な地理は不要）
- 都市はノード（円）、道はパス（線）で表現
- x, y座標は0-1000の範囲で正規化

## ビジネスロジック仮定

### 移動計算
- 1分 = 0.25km（15km/h相当）
- セッション開始時刻と終了時刻の差から距離を計算
- 中断時も経過時間分の距離は保存

### 分岐選択
- 目的地に到達後、次のパスを選択可能
- パスは双方向ではなく、片方向として定義
- 逆方向に戻る場合は別途パスを定義する必要あり

### ユーザー体験
- 初回ログイン時にスタート地点を選択
- 一度選んだスタート地点から開始
- 進捗は常に自動保存

## 今後の拡張性
- 国コード（country_code）で将来の海外展開に対応
- locationsテーブルの is_start フラグで動的にスタート地点を管理
